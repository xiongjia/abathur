# grunt config

# settings (e.g. folder name, server port numbers)
abathur:
  dist: &dist 'dist'
  assets: &assets 'dist/assets'
  output: &output 'output'
  mainCSS: &mainCSS 'dist/assets/css/main_v0.1.css'
  mainJS: &mainJS 'dist/assets/js/main_v0.1.js'

# task config - bower
gruntBower: &gruntBower
  install:
    options:
      install: true
      copy: true
      verbose: true
      targetDir: './bower_components'

# task config - jshint
gruntJSHint: &gruntJSHint
  options:
    jshintrc: '.jshintrc'
  gruntfile:
    src: 'Gruntfile.js'
  config:
    src:
      - 'content/assets/js/abathur.js'

# task config - clean
gruntClean: &gruntClean
  - *dist

# task config - copy
gruntCopy: &gruntCopy
  content:
    expand: true
    cwd: *output
    src:
      - '**/*.html'
    dest: *dist
  conf:
    src:
      - 'content/htaccess'
    dest: 'dist/.htaccess'
  fonts:
    expand: true
    cwd: 'bower_components/bootstrap/dist'
    src:
      - '**/*.{eot,svg,ttf,woff}'
    dest: *assets
  icon:
    src:
      - 'content/favicon.ico'
    dest: 'dist/favicon.ico'
  map:
    expand: true
    cwd: 'bower_components/bootstrap/dist/css'
    src:
      - '*.map'
    dest: 'dist/assets/css/'
  img:
    expand: true
    cwd: 'content/assets/img'
    src:
      - '*'
    dest: 'dist/assets/img/'
  data:
    expand: true
    cwd: 'content/assets/data'
    src:
      - '*.png'
    dest: 'dist/assets/data/'

# task config - concat
gruntConcat: &gruntConcat
  css:
    src:
      - 'bower_components/bootstrap/dist/css/bootstrap.css'
      - 'content/assets/css/abathur.css'
    dest: *mainCSS
  js:
    src:
      - 'bower_components/jquery/jquery.js'
      - 'content/assets/js/abathur.js'
    dest: *mainJS

# task config - cssmin
gruntCssmin: &gruntCssmin
  minify:
    src:
      - *mainCSS
    dest: *mainCSS

# task config - uglify
gruntUglify: &gruntUglify
  dist:
    src: *mainJS
    dest: *mainJS

# task config - htmlmin
gruntHtmlmin: &gruntHtmlmin
  dist:
    options:
      removeComments: true
      collapseWhitespace: true 
    files:
      - 
        expand: true
        cwd: 'dist'
        src: '**/*.html'
        dest: 'dist'

# task config - watch
gruntWatch: &gruntWatch
  content:
    files:
      - 'output/**/*.html'
    tasks:
      - 'copy:content'
      - 'htmlmin'
    options:
      spawn: false

# task config - connect
gruntConnect: &gruntConnect
  server:
    options:
      port: 9001
      debug: true
      base: 'dist'

# task config - imagemin
gruntImagemin: &gruntImagemin
  dynamic:
    options:
      optimizationLevel: 3
    files:
      - expand: true
        cwd: 'dist/assets/data/'
        src:
          - '**/*.png'
        dest: 'dist/assets/data/'
      - expand: true
        cwd: 'dist/assets/img/'
        src:
          - '**/*.png'
        dest: 'dist/assets/img/'

# grunt config root
root:
  bower: *gruntBower
  jshint: *gruntJSHint
  clean: *gruntClean
  copy: *gruntCopy
  concat: *gruntConcat
  cssmin: *gruntCssmin
  uglify: *gruntUglify
  htmlmin: *gruntHtmlmin
  watch: *gruntWatch
  connect: *gruntConnect
  imagemin: *gruntImagemin

